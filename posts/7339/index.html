<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>Github Actions—解放双手 | 张时贰</title><meta name="author" content="张时贰"><meta name="copyright" content="张时贰"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="一、前置知识CI\CD 即：持续集成（Continuous Integration）、持续交付（Continuous Delivery）、持续部署（Continuous Deployment）。GitHub Actions 是一个持续集成和持续交付 (CI&#x2F;CD) 平台，可用于自动执行构建、测试和部署管道。 最近几个月拿Github Actions写了一些CI\CD，是看别人怎么写然后边"><meta property="og:type" content="article"><meta property="og:title" content="Github Actions—解放双手"><meta property="og:url" content="https://zhsher.cn/posts/7339/index.html"><meta property="og:site_name" content="张时贰"><meta property="og:description" content="一、前置知识CI\CD 即：持续集成（Continuous Integration）、持续交付（Continuous Delivery）、持续部署（Continuous Deployment）。GitHub Actions 是一个持续集成和持续交付 (CI&#x2F;CD) 平台，可用于自动执行构建、测试和部署管道。 最近几个月拿Github Actions写了一些CI\CD，是看别人怎么写然后边"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://zhsher.cn/Hexo_img/top_img/Github%20Actions.png"><meta property="article:published_time" content="2022-11-09T14:26:58.000Z"><meta property="article:modified_time" content="2023-01-11T18:00:58.000Z"><meta property="article:author" content="张时贰"><meta property="article:tag" content="Git"><meta property="article:tag" content="Github"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://zhsher.cn/Hexo_img/top_img/Github%20Actions.png"><link rel="shortcut icon" href="/Hexo_img/config/favicon.jpg"><link rel="canonical" href="https://zhsher.cn/posts/7339/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//hm.baidu.com"><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="baidu-site-verification" content="codeva-VDDJwC4an5"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/6.0.0/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/node-snackbar/0.1.16/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://jsd.onmicrosoft.cn/npm/@fancyapps/ui@latest/dist/fancybox/fancybox.min.css" media="print" onload='this.media="all"'><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?fadb05107bedd9dd8c74c73410a00e4f";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script>const GLOBAL_CONFIG={root:"/",algolia:{appId:"RNPIZK1M8E",apiKey:"8ee7fe3d8cad0c9c3a5a45a96e8dbc26",indexName:"Hexo_Blog",hits:{per_page:6},languages:{input_placeholder:"搜索文章",hits_empty:"找不到您查询的内容：${query}",hits_stats:"找到 ${hits} 条结果，用时 ${time} 毫秒"}},localSearch:void 0,translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"簡"},noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:200},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"天",dateSuffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:{limitCount:50,languages:{author:"作者: 张时贰",link:"链接: ",source:"来源: 张时贰",info:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},lightbox:"fancybox",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#49b1f5",bgDark:"#1f1f1f",position:"top-right"},source:{justifiedGallery:{js:"https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js",css:"https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/justifiedGallery/3.8.1/css/justifiedGallery.min.css"}},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!1,percent:{toc:!0,rightside:!0},autoDarkmode:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"Github Actions—解放双手",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2023-01-12 02:00:58"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const n=864e5*o,a={value:t,expiry:(new Date).getTime()+n};localStorage.setItem(e,JSON.stringify(a))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise(((t,o)=>{const n=document.createElement("script");n.src=e,n.async=!0,n.onerror=o,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,t())},document.head.appendChild(n)})),e.getCSS=(e,t=!1)=>new Promise(((o,n)=>{const a=document.createElement("link");a.rel="stylesheet",a.href=e,t&&(a.id=t),a.onerror=n,a.onload=a.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,o())},document.head.appendChild(a)})),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme"),o=(new Date).getHours();void 0===t?o<=6||o>=18?activateDarkMode():activateLightMode():"light"===t?activateLightMode():activateDarkMode();const n=saveToLocal.get("aside-status");void 0!==n&&("hide"===n?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script><script>LA.init({id:"K1zxRlE4Z6fapyHY",ck:"K1zxRlE4Z6fapyHY"})</script><script src="https://sdk.51.la/perf/js-sdk-perf.min.js" crossorigin="anonymous"></script><script>(new LingQue.Monitor).init({id:"K1zxj4cOs0HoFDZr"})</script><link rel="stylesheet" href="https://jsd.onmicrosoft.cn/npm/zhsher-static@1.0.14/blog/css/zhsher.min.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload='this.media="screen"'><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/feed.xml" title="张时贰" type="application/rss+xml"></head><body><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><div class="loading-img"></div><div class="loading-image-dot"></div></div></div><script>(()=>{const e=document.getElementById("loading-box"),d=document.body,o=()=>{d.style.overflow="",e.classList.add("loaded")},t=()=>{d.style.overflow="hidden",e.classList.remove("loaded")};t(),window.addEventListener("load",(()=>{o()})),document.addEventListener("pjax:send",(()=>{t()})),document.addEventListener("pjax:complete",(()=>{o()}))})()</script><script>window.paceOptions={restartOnPushState:!1},document.addEventListener("pjax:send",(()=>{Pace.restart()}))</script><link rel="stylesheet" href="/css/AAprogress_bar.css"><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/pace/1.2.4/pace.min.js"></script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://q1.qlogo.cn/g?b=qq&amp;nk=1310446718&amp;s=5" onerror='onerror=null,src="/Hexo_img/config/friend_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">112</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">36</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">14</div></a></div><hr class="custom-hr"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>主页</span></a></div><div class="menus_item"><a class="site-page" href="/hot-article/"><i class="fa-fw fa-solid fa-book-open"></i> <span>阅读排行</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa-solid fa-pencil"></i> <span>文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>时间轴</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i> <span>友链</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i> <span>友人帐</span></a></li><li><a class="site-page child" href="/fcircle/"><i class="fa-fw fa-solid fa-user-group"></i> <span>朋友圈</span></a></li><li><a class="site-page child" href="javascript:travelling()" rel="external nofollow noreferrer"><i class="fa-fw fa-fw fas fa-bus"></i> <span>宝藏博主</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa-solid fa-circle-user"></i> <span>我的</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>关于&amp;留言</span></a></li><li><a class="site-page child" href="/zone/"><i class="fa-fw fa-fw fa-solid fa-cloud-rain"></i> <span>动态</span></a></li><li><a class="site-page child" href="/talk/"><i class="fa-fw fa-solid fa-comment"></i> <span>备忘录</span></a></li><li><a class="site-page child" href="/history/"><i class="fa-fw fa-regular fa-clock"></i> <span>建站史</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:toforeverblog()" rel="external nofollow noreferrer"><i class="fa-fw fa-solid fa-paper-plane"></i> <span>虫洞</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url('/Hexo_img/top_img/Github%20Actions.png')"><nav id="nav"><span id="blog-info"><div class="back-home-button" tabindex="-1"><i class="back-home-button-icon fas fa-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="/" title="前往博客主页" target="_blank" one-link-mark="yes"><img class="back-menu-item-icon" src="https://q1.qlogo.cn/g?b=qq&amp;nk=1310446718&amp;s=5"><span class="back-menu-item-text">博客</span></a><a class="back-menu-item" href="https://status.zhsher.cn/status/friend" rel="external nofollow" title="前往友链监控" target="_blank" one-link-mark="yes"><img class="back-menu-item-icon" src="https://zhsher.cn/Hexo_img/config/nav_uptime.webp"><span class="back-menu-item-text">友链监控</span></a><a class="back-menu-item" href="https://rv.zhsher.cn/Game_box/game/" rel="external nofollow" title="前往游戏盒" target="_blank" one-link-mark="yes"><img class="back-menu-item-icon" src="https://zhsher.cn/Hexo_img/config/nav_box.webp"><span class="back-menu-item-text">游戏盒</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" href="https://github.com/GC-ZF/hexo-hot-article" title="前往阅读统计" target="_blank" rel="noopener nofollow" one-link-mark="yes"><img class="back-menu-item-icon" src="https://zhsher.cn/Hexo_img/config/nav_article.webp"><span class="back-menu-item-text">占位</span></a></div></div></div></div><a id="site-name" href="/"><div class="title">张时贰</div><i class="fa-solid fa-house"></i></a></span><div class="mask-name-container"><center id="name-container"><a id="page-name" href="javascript:rmf.scrollToTop()" rel="external nofollow noreferrer">PAGE_NAME</a></center></div><div id="menus"><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-search fa-fw"></i> <span>搜索</span></a></div><div class="nav-button" id="darkmode_navswitch"><a class="darkmode_switchbutton" type="button" title="浅色和深色模式转换" onclick="rmf.switchDarkMode()"><i class="fas fa-adjust"></i></a></div><div class="nav-button" id="nav-totop"><a class="totopbtn"><i class="fas fa-arrow-up"></i><span id="percent" onclick="btf.scrollToDest(0,500)">0</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>主页</span></a></div><div class="menus_item"><a class="site-page" href="/hot-article/"><i class="fa-fw fa-solid fa-book-open"></i> <span>阅读排行</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa-solid fa-pencil"></i> <span>文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>时间轴</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i> <span>友链</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i> <span>友人帐</span></a></li><li><a class="site-page child" href="/fcircle/"><i class="fa-fw fa-solid fa-user-group"></i> <span>朋友圈</span></a></li><li><a class="site-page child" href="javascript:travelling()" rel="external nofollow noreferrer"><i class="fa-fw fa-fw fas fa-bus"></i> <span>宝藏博主</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa-solid fa-circle-user"></i> <span>我的</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>关于&amp;留言</span></a></li><li><a class="site-page child" href="/zone/"><i class="fa-fw fa-fw fa-solid fa-cloud-rain"></i> <span>动态</span></a></li><li><a class="site-page child" href="/talk/"><i class="fa-fw fa-solid fa-comment"></i> <span>备忘录</span></a></li><li><a class="site-page child" href="/history/"><i class="fa-fw fa-regular fa-clock"></i> <span>建站史</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:toforeverblog()" rel="external nofollow noreferrer"><i class="fa-fw fa-solid fa-paper-plane"></i> <span>虫洞</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Github Actions—解放双手</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-11-09T14:26:58.000Z" title="发表于 2022-11-09 22:26:58">2022-11-09</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-01-11T18:00:58.000Z" title="更新于 2023-01-12 02:00:58">2023-01-12</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">6.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>29分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="Github Actions—解放双手"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="一、前置知识"><a href="#一、前置知识" class="headerlink" title="一、前置知识"></a>一、前置知识</h2><p>CI\CD 即：持续集成（<code>Continuous Integration</code>）、持续交付（<code>Continuous Delivery</code>）、持续部署（<code>Continuous Deployment</code>）。GitHub Actions 是一个持续集成和持续交付 (CI&#x2F;CD) 平台，可用于自动执行构建、测试和部署管道。</p><p>最近几个月拿Github Actions写了一些CI\CD，是看别人怎么写然后边学边敲得，比如定时执行脚本、自动化博客部署、打包pip、npm等等，自动化以后甚是好用<del>（主要是懒）</del>！故翻文档整理一则入门笔记，本以为我<del>精通</del>了，一翻文档翻出了一堆，写成了进阶，主要是<code>jobs</code>😭文档中分好细，实际生产工作中并没用到太多，感觉比较偏，剩下的<code>on、evn、secret</code>都是高频且只要有一定的git基础很容易搞懂并上手，但如果你是新手文档会显得晦涩，推荐两篇快速入门：</p><ul><li><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://blog.csdn.net/Ber_Bai/article/details/120310024">最全总结，GitHub Action自动化部署</a></p></li><li><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://blog.csdn.net/unreliable_narrator/article/details/124468384">GitHubActions详解</a></p></li></ul><p>在阅读以前应该有一些基础：git常识，yml文件书写规范，善于查阅文档</p><p>参考文档：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions">Workflow syntax for GitHub Actions - GitHub Docs</a></p><h2 id="二、文件结构"><a href="#二、文件结构" class="headerlink" title="二、文件结构"></a>二、文件结构</h2><p>Github项目路径下创建<code>.github/workflows/xxx.yml</code>，每一个<code>.yml</code>文件对应一个<strong>workflows</strong></p><p>基本概念：</p><ul><li><p>workflow（流程）：持续集成一次运行的过程，就是一个 workflow</p></li><li><p>jobs（任务）：一个 workflow 由一个或多个 jobs 构成，含义是一次持续集成的运行，可以完成多个任务</p></li><li><p>step（步骤）：每个 job 由多个 step 构成，一步步完成</p></li><li><p>action（动作）：每个 step 可以依次执行一个或多个命令</p></li></ul><h3 id="name"><a href="#name" class="headerlink" title="name"></a>name</h3><p>工作流名称，留空为文件名</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">hello-github-actions</span></span><br></pre></td></tr></table></figure><h3 id="on"><a href="#on" class="headerlink" title="on"></a>on</h3><p>触发的条件：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.github.com/cn/actions/using-workflows/events-that-trigger-workflows">Events that trigger workflows - GitHub Docs</a></p><h4 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h4><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># push时触发</span></span><br><span class="line"><span class="attr">on:</span> <span class="string">push</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 数组表示，push、fork时触发</span></span><br><span class="line"><span class="attr">on:</span> [<span class="string">push</span>, <span class="string">fork</span>]</span><br></pre></td></tr></table></figure><p>对事件细分，又可以增加<strong>事件活动类型（<code>types</code>）和筛选器（<code>branches</code>、<code>tags</code>、<code>paths</code>）</strong>规定事件的触发条件</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="string">事件:</span></span><br><span class="line">    <span class="string">活动类型\筛选器:</span></span><br><span class="line">       <span class="string">条件</span>  </span><br></pre></td></tr></table></figure><h4 id="types"><a href="#types" class="headerlink" title="types"></a>types</h4><p>语法：<code>on.&lt;event_name&gt;.types</code>，定义<strong>事件活动类型</strong></p><p>issues时，触发条件</p><ul><li>创建issues</li><li>为issues做标签</li></ul><p>当创建一个带两个标签的issues，则触发三个工作流</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">issues:</span></span><br><span class="line">    <span class="attr">types:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">opened</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">labeled</span></span><br><span class="line">      </span><br><span class="line"><span class="comment"># 可以表示为数组</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">issues:</span></span><br><span class="line">    <span class="attr">types:</span> [<span class="string">opened</span>,<span class="string">labeled</span>]</span><br></pre></td></tr></table></figure><h4 id="『pull-request』：branches-branches-ignore"><a href="#『pull-request』：branches-branches-ignore" class="headerlink" title="『pull_request』：branches &amp; branches-ignore"></a>『pull_request』：branches &amp; branches-ignore</h4><p>语法：<code>on.&lt;pull_request|pull_request_target&gt;.&lt;branches|branches-ignore&gt;</code></p><p>如果同时定义 <code>branches</code>&#x2F;<code>branches-ignore</code> 筛选器和 <code>paths</code>筛选器，则工作流将只在这<strong>两个筛选器都满足条件时运行</strong></p><p><code>branches</code>与<code>branches-ignore</code>不能同时使用，可以使用<code>!</code>排除分支，当<code>branches</code>中使用<code>!</code>需要至少定义一个不带<code>!</code>的分支，支持glob模式（一种正则表达）</p><p>pull_request时，触发条件</p><ul><li><code>releases/开头</code>分支</li><li><code>releases/开头-alpha结尾</code>分支</li></ul><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">pull_request:</span></span><br><span class="line">    <span class="attr">branches:</span>    </span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;releases/**&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;!releases/**-alpha&#x27;</span></span><br></pre></td></tr></table></figure><p>pull_request时触发，但不包括</p><ul><li><code>main</code>分支</li><li><code>releases/开头-alpha结尾</code>分支</li></ul><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">pull_request:</span></span><br><span class="line">    <span class="comment"># Sequence of patterns matched against refs/heads</span></span><br><span class="line">    <span class="attr">branches-ignore:</span>    </span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;main&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;releases/**-alpha&#x27;</span></span><br></pre></td></tr></table></figure><p>pull_request时，触发条件</p><ul><li><code>releases/开头</code>分支</li><li>但不包括<code>releases/开头-alpha结尾</code>分支</li></ul><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">pull_request:</span></span><br><span class="line">    <span class="attr">branches:</span>    </span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;releases/**&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;!releases/**-alpha&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="『push』：branches-tags-branches-ignore-tags-ignore"><a href="#『push』：branches-tags-branches-ignore-tags-ignore" class="headerlink" title="『push』：branches &amp; tags &amp; branches-ignore &amp; tags-ignore"></a>『push』：branches &amp; tags &amp; branches-ignore &amp; tags-ignore</h4><p>语法：<code>on.push.&lt;branches|tags|branches-ignore|tags-ignore&gt;</code></p><p>如果仅定义 <code>tags</code>&#x2F;<code>tags-ignore</code> 或 <code>branches</code>&#x2F;<code>branches-ignore</code>，则工作流不会针对影响未定义的 Git ref 的事件运行。如果两者 <code>tags</code>&#x2F;<code>tags-ignore</code> 或 <code>branches</code>&#x2F;<code>branches-ignore</code> 均未定义，则工作流将针对影响<strong>分支或标记</strong>的事件运行。 如果你同时定义 <code>branches</code>&#x2F;<code>branches-ignore</code> 筛选器和 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.github.com/cn/actions/using-workflows/workflow-syntax-for-github-actions#onpushpull_requestpull_request_targetpathspaths-ignore"><code>paths</code></a> 筛选器，则工作流将只在这<strong>两个筛选器都满足条件时运行</strong></p><p><code>branches</code>与<code>branches-ignore</code>不能同时使用， <code>tags</code> 与 <code>tags-ignore</code> 不能同时使用，可以使用<code>!</code>排除分支|标签，当<code>branches|tags</code>中使用<code>!</code>需要至少定义一个不带<code>!</code>的分支，支持glob模式（一种正则表达）</p><p>push时，触发条件</p><ul><li><code>main</code>分支</li><li><code>releases/</code>开头分支</li><li><code>v2</code>标签</li><li><code>v1.</code>开头的标签</li></ul><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="comment"># Sequence of patterns matched against refs/heads</span></span><br><span class="line">    <span class="attr">branches:</span>    </span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;releases/**&#x27;</span></span><br><span class="line">    <span class="comment"># Sequence of patterns matched against refs/tags</span></span><br><span class="line">    <span class="attr">tags:</span>        </span><br><span class="line">      <span class="bullet">-</span> <span class="string">v2</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">v1.*</span></span><br></pre></td></tr></table></figure><p>push时触发，但不包括</p><ul><li><code>main</code>分支</li><li><code>releases/开头</code>分支</li><li><code>v2</code>标签</li><li><code>v1.</code>开头的标签</li></ul><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="comment"># Sequence of patterns matched against refs/heads</span></span><br><span class="line">    <span class="attr">branches-ignore:</span>    </span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;releases/**&#x27;</span></span><br><span class="line">    <span class="comment"># Sequence of patterns matched against refs/tags</span></span><br><span class="line">    <span class="attr">tags-ignore:</span>        </span><br><span class="line">      <span class="bullet">-</span> <span class="string">v2</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">v1.*</span></span><br></pre></td></tr></table></figure><p>push时，触发条件</p><ul><li><code>releases/开头</code>的分支</li><li>但不包括<code>releases/开头-alpha结尾</code>的分支</li></ul><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;releases/**&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;!releases/**-alpha&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="『push-pull-request』：paths-paths-ignore"><a href="#『push-pull-request』：paths-paths-ignore" class="headerlink" title="『push &amp; pull_request』：paths &amp; paths-ignore"></a>『push &amp; pull_request』：paths &amp; paths-ignore</h4><p>语法：<code>on.&lt;push|pull_request|pull_request_target&gt;.&lt;paths|paths-ignore&gt;</code></p><p>如果同时定义 <code>branches</code>&#x2F;<code>branches-ignore</code> 筛选器和 <code>paths</code> 筛选器，则工作流将只在这<strong>两个筛选器都满足条件时运行</strong></p><p><code>paths</code> 与 <code>paths-ignore</code> 不能同时使用，可以使用<code>!</code>排除标签，当<code>paths</code>中使用<code>!</code>需要至少定义一个不带<code>!</code>的路径，支持glob模式（一种正则表达）</p><p>push时，触发条件</p><ul><li>包含<code>.js</code>文件名</li></ul><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">paths:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;**.js&#x27;</span></span><br></pre></td></tr></table></figure><p>push时触发，但不包括</p><ul><li><code>docs</code>目录下</li></ul><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">paths-ignore:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;docs/**&#x27;</span></span><br></pre></td></tr></table></figure><p>push时，触发条件</p><ul><li><code>sub-project</code>目录下，但不包括<code>sub-project/docs</code></li></ul><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">paths:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;sub-project/**&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;!sub-project/docs/**&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="schedule"><a href="#schedule" class="headerlink" title="schedule"></a>schedule</h4><p>定时<code>cron</code>，推荐在线验证网站：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://crontab.guru/">Crontab.guru - The cron schedule expression editor</a></p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">schedule:</span></span><br><span class="line">    <span class="comment"># At 05:30 on Monday and Wednesday</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">cron:</span> <span class="string">&#x27;30 5 * * 1,3&#x27;</span></span><br><span class="line">	<span class="comment"># At 05:30 on Tuesday and Thursday   </span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">cron:</span> <span class="string">&#x27;30 5 * * 2,4&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="workflow"><a href="#workflow" class="headerlink" title="workflow"></a>workflow</h4><p>语法：<code>on.workflow_call</code>，调用其它工作流，但这部分没理解，也从未见过示例，先留个坑</p><p>语法：<code>on.workflow_run.&lt;branches|branches-ignore&gt;</code>：指定运行分支</p><p>仅当名为 <code>Build</code> 的工作流在名称以 <code>releases/</code> 开头的分支上运行时，具有以下触发器的工作流才会运行</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">workflow_run:</span></span><br><span class="line">    <span class="attr">workflows:</span> [<span class="string">&quot;Build&quot;</span>]</span><br><span class="line">    <span class="attr">types:</span> [<span class="string">requested</span>]</span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;releases/**&#x27;</span></span><br></pre></td></tr></table></figure><p>仅当名为 <code>Build</code> 的工作流不在名为 <code>canary</code> 的分支上运行时，具有以下触发器的工作流才会运行</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">workflow_run:</span></span><br><span class="line">    <span class="attr">workflows:</span> [<span class="string">&quot;Build&quot;</span>]</span><br><span class="line">    <span class="attr">types:</span> [<span class="string">requested</span>]</span><br><span class="line">    <span class="attr">branches-ignore:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;canary&quot;</span></span><br></pre></td></tr></table></figure><p>语法：<code>on.workflow_dispatch</code>：手动触发</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">workflow_dispatch:</span></span><br></pre></td></tr></table></figure><p>语法：<code>on.workflow_dispatch.inputs</code>：带表单的手动触发</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 格式</span></span><br><span class="line"><span class="attr">inputs:</span></span><br><span class="line">  <span class="string">变量名字:</span></span><br><span class="line">    <span class="attr">description:</span> <span class="string">&#x27;Log level&#x27;</span>	<span class="comment"># 描述</span></span><br><span class="line">    <span class="attr">required:</span> <span class="literal">true</span>				<span class="comment"># 必填</span></span><br><span class="line">    <span class="attr">default:</span> <span class="string">&#x27;warning&#x27;</span> 			<span class="comment"># 默认值</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">choice</span>				<span class="comment"># type: choice 选项，string 字符串，number 数值，boolean 布尔值</span></span><br><span class="line">    <span class="attr">options:</span>					<span class="comment"># 选项</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">info</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">warning</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">debug</span> </span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">workflow_dispatch:</span></span><br><span class="line">    <span class="attr">inputs:</span></span><br><span class="line">      <span class="attr">logLevel:</span></span><br><span class="line">        <span class="attr">description:</span> <span class="string">&#x27;Log level&#x27;</span></span><br><span class="line">        <span class="attr">required:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">default:</span> <span class="string">&#x27;warning&#x27;</span> </span><br><span class="line">        <span class="attr">type:</span> <span class="string">choice</span></span><br><span class="line">        <span class="attr">options:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">info</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">warning</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">debug</span> </span><br><span class="line">      <span class="attr">print_tags:</span></span><br><span class="line">        <span class="attr">description:</span> <span class="string">&#x27;True to print to STDOUT&#x27;</span></span><br><span class="line">        <span class="attr">required:</span> <span class="literal">true</span> </span><br><span class="line">        <span class="attr">type:</span> <span class="string">boolean</span> </span><br><span class="line">      <span class="attr">tags:</span></span><br><span class="line">        <span class="attr">description:</span> <span class="string">&#x27;Test scenario tags&#x27;</span></span><br><span class="line">        <span class="attr">required:</span> <span class="literal">true</span> </span><br><span class="line">        <span class="attr">type:</span> <span class="string">string</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">print-tag:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="comment"># 如果print_tags为true就执行</span></span><br><span class="line">    <span class="attr">if:</span>  <span class="string">$&#123;&#123;</span> <span class="string">inputs.print_tags</span> <span class="string">&#125;&#125;</span> </span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Print</span> <span class="string">the</span> <span class="string">input</span> <span class="string">tag</span> <span class="string">to</span> <span class="string">STDOUT</span></span><br><span class="line">      	<span class="comment"># 输出tags的值</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">echo</span>  <span class="string">The</span> <span class="string">tags</span> <span class="string">are</span> <span class="string">$&#123;&#123;</span> <span class="string">inputs.tags</span> <span class="string">&#125;&#125;</span> </span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://docs.github.com/assets/cb-93002/images/help/images/workflow-dispatch-inputs.png" alt="inputs"></p><h3 id="evn"><a href="#evn" class="headerlink" title="evn"></a>evn</h3><p>语法：<code>jobs.steps[*\].env</code>，读取环境变量，其中<code>GITHUB_TOKEN</code>是一个特殊的变量，并不需要在仓库下<strong>『Setting-&gt;Secrets-&gt;Actions』</strong>定义的一个变量，而是工作流运行时自动创建的临时TOKEN，不需要自己配置，源自：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.github.com/en/actions/security-guides/automatic-token-authentication">Automatic token authentication - GitHub Docs</a></p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">steps:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">My</span> <span class="string">first</span> <span class="string">action</span></span><br><span class="line">    <span class="attr">env:</span></span><br><span class="line">      <span class="attr">GITHUB_TOKEN:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITHUB_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">      <span class="attr">FIRST_NAME:</span> <span class="string">Mona</span></span><br><span class="line">      <span class="attr">LAST_NAME:</span> <span class="string">Octocat</span></span><br></pre></td></tr></table></figure><h3 id="jobs"><a href="#jobs" class="headerlink" title="jobs"></a>jobs</h3><p>jobs表示要执行的一项或多项任务。jobs可以包含一个或多个job，这个任务可以包含多个步骤(steps)</p><p>语法：</p><ul><li><code>jobs.&lt;job_id&gt;</code>：jobs的唯一标识符</li><li><code>jobs.&lt;job_id&gt;.name</code>：作业名称（如果留空，则为job_id）</li></ul><p><code>job_id</code> 值为 <code>my_first_job</code> 和 <code>my_second_job</code>。默认多个job是<strong>并发</strong>执行的</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">my_first_job:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">My</span> <span class="string">first</span> <span class="string">job</span></span><br><span class="line">  <span class="attr">my_second_job:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">My</span> <span class="string">second</span> <span class="string">job</span></span><br></pre></td></tr></table></figure><p>语法：<code>jobs.&lt;job_id&gt;.needs</code>：等待前面的jobs<strong>成功完成</strong>才执行</p><p><code>job1</code> 必须在 <code>job2</code> 开始之前<strong>成功完成</strong>，并且 <code>job3</code> 等待 <code>job1</code> 和 <code>job2</code> 完成</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">job1:</span></span><br><span class="line">  <span class="attr">job2:</span></span><br><span class="line">    <span class="attr">needs:</span> <span class="string">job1</span></span><br><span class="line">  <span class="attr">job3:</span></span><br><span class="line">    <span class="attr">needs:</span> [<span class="string">job1</span>, <span class="string">job2</span>]</span><br></pre></td></tr></table></figure><p>语法：<code>jobs.&lt;job_id&gt;.if</code>：执行条件</p><p><code>job3</code> 使用 <code>always()</code> 条件表达式，确保始终在 <code>job1</code> 和 <code>job2</code> 完成（无论是否成功）后运行</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">job1:</span></span><br><span class="line">  <span class="attr">job2:</span></span><br><span class="line">    <span class="attr">needs:</span> <span class="string">job1</span></span><br><span class="line">  <span class="attr">job3:</span></span><br><span class="line">    <span class="attr">if:</span> <span class="string">$&#123;&#123;</span> <span class="string">always()</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">needs:</span> [<span class="string">job1</span>, <span class="string">job2</span>]</span><br></pre></td></tr></table></figure><p>语法：</p><ul><li><code>jobs.&lt;job_id&gt;.runs-on</code>：运行镜像，查表：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.github.com/cn/actions/using-workflows/workflow-syntax-for-github-actions#choosing-github-hosted-runners">Workflow syntax for GitHub Actions - GitHub Docs</a></li><li><code>jobs.&lt;job_id&gt;.steps</code>：作业步骤，步骤中可以包括多个命令</li><li><code>jobs.&lt;job_id&gt;.steps[*].name</code>：步骤中又分小任务，每个任务的名称，将会展示在Actions</li><li><code>jobs.&lt;job_id&gt;.steps[*].run</code>：执行shell命令</li></ul><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Greeting</span> <span class="string">from</span> <span class="string">Mona</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span> <span class="string">push</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">my-job:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">My</span> <span class="string">Job</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Print</span> <span class="string">a</span> <span class="string">greeting</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">MY_VAR:</span> <span class="string">Hi</span> <span class="string">there!</span> <span class="string">My</span> <span class="string">name</span> <span class="string">is</span></span><br><span class="line">          <span class="attr">FIRST_NAME:</span> <span class="string">Mona</span></span><br><span class="line">          <span class="attr">MIDDLE_NAME:</span> <span class="string">The</span></span><br><span class="line">          <span class="attr">LAST_NAME:</span> <span class="string">Octocat</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          echo $MY_VAR $FIRST_NAME $MIDDLE_NAME $LAST_NAME.</span></span><br><span class="line"><span class="string"></span>      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">end</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line">          <span class="string">echo</span> <span class="string">test</span> <span class="string">end</span></span><br></pre></td></tr></table></figure><p>语法：<code>jobs.&lt;job_id&gt;.steps[*].if</code>：执行条件。if可取值：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.github.com/cn/actions/learn-github-actions/expressions#status-check-functions">Expressions - GitHub Docs</a></p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 仅当`pull_request`时且action为`unassigned`触发</span></span><br><span class="line"><span class="attr">steps:</span></span><br><span class="line"> <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">My</span> <span class="string">first</span> <span class="string">step</span></span><br><span class="line">   <span class="attr">if:</span> <span class="string">$&#123;&#123;</span> <span class="string">github.event_name</span> <span class="string">==</span> <span class="string">&#x27;pull_request&#x27;</span> <span class="string">&amp;&amp;</span> <span class="string">github.event.action</span> <span class="string">==</span> <span class="string">&#x27;unassigned&#x27;</span> <span class="string">&#125;&#125;</span></span><br><span class="line">   <span class="attr">run:</span> <span class="string">echo</span> <span class="string">This</span> <span class="string">event</span> <span class="string">is</span> <span class="string">a</span> <span class="string">pull</span> <span class="string">request</span> <span class="string">that</span> <span class="string">had</span> <span class="string">an</span> <span class="string">assignee</span> <span class="string">removed.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 仅当前一个任务失败，My backup step才执行</span></span><br><span class="line"><span class="attr">steps:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">My</span> <span class="string">first</span> <span class="string">step</span></span><br><span class="line">    <span class="attr">uses:</span> <span class="string">octo-org/action-name@main</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">My</span> <span class="string">backup</span> <span class="string">step</span></span><br><span class="line">    <span class="attr">if:</span> <span class="string">$&#123;&#123;</span> <span class="string">failure()</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">uses:</span> <span class="string">actions/heroku@1.0.0</span></span><br></pre></td></tr></table></figure><p>语法：<code>jobs.&lt;job_id&gt;.steps[*].uses</code>：这个就很有意思了，可以减少我们重复造轮子，调用别人做好的Actions。可以在<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/marketplace?type=actions">GitHub Marketplace · Actions</a> 找到需要的轮子</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 指定uses的分支、版本</span></span><br><span class="line"><span class="attr">steps:</span></span><br><span class="line">  <span class="comment"># Reference a specific commit</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@a81bbbf8298c0fa03ea29cdc473d45769f953675</span></span><br><span class="line">  <span class="comment"># Reference the major version of a release</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line">  <span class="comment"># Reference a specific version</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v3.2.0</span></span><br><span class="line">  <span class="comment"># Reference a branch</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@main</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用别人的公有仓库，&#123;owner&#125;/&#123;repo&#125;@&#123;ref&#125;</span></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">my_first_job:</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">My</span> <span class="string">first</span> <span class="string">step</span></span><br><span class="line">        <span class="comment"># Uses the default branch of a public repository</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/heroku@main</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">My</span> <span class="string">second</span> <span class="string">step</span></span><br><span class="line">        <span class="comment"># Uses a specific version tag of a public repository</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/aws@v2.0.1</span></span><br><span class="line">        </span><br><span class="line"><span class="comment"># 调用仓库下特定路径，&#123;owner&#125;/&#123;repo&#125;/&#123;path&#125;@&#123;ref&#125;</span></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">my_first_job:</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">My</span> <span class="string">first</span> <span class="string">step</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/aws/ec2@main</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用自己写的actions</span></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">my_first_job:</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Check</span> <span class="string">out</span> <span class="string">repository</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Use</span> <span class="string">local</span> <span class="string">my-action</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">./.github/actions/my-action</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用docker docker://&#123;image&#125;:&#123;tag&#125;</span></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">my_first_job:</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">My</span> <span class="string">first</span> <span class="string">step</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">docker://alpine:3.8</span></span><br><span class="line">       </span><br><span class="line"><span class="comment"># 指定docker地址 docker://&#123;host&#125;/&#123;image&#125;:&#123;tag&#125;</span></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">my_first_job:</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">My</span> <span class="string">first</span> <span class="string">step</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">docker://ghcr.io/OWNER/IMAGE_NAME</span></span><br></pre></td></tr></table></figure><p>语法：<code>jobs.&lt;job_id&gt;.steps[*].shell</code>：指定shell，默认bash</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">steps:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Display</span> <span class="string">the</span> <span class="string">path</span></span><br><span class="line">    <span class="attr">run:</span> <span class="string">echo</span> <span class="string">$PATH</span></span><br><span class="line">    <span class="attr">shell:</span> <span class="string">bash</span></span><br><span class="line">    </span><br><span class="line"><span class="attr">steps:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Display</span> <span class="string">the</span> <span class="string">path</span></span><br><span class="line">    <span class="attr">run:</span> <span class="string">echo</span> <span class="string">%PATH%</span></span><br><span class="line">    <span class="attr">shell:</span> <span class="string">cmd</span></span><br><span class="line"></span><br><span class="line"><span class="attr">steps:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Display</span> <span class="string">the</span> <span class="string">path</span></span><br><span class="line">    <span class="attr">run:</span> <span class="string">echo</span> <span class="string">$&#123;env:PATH&#125;</span></span><br><span class="line">    <span class="attr">shell:</span> <span class="string">powershell</span></span><br><span class="line"></span><br><span class="line"><span class="attr">steps:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Display</span> <span class="string">the</span> <span class="string">path</span></span><br><span class="line">    <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">      import os</span></span><br><span class="line"><span class="string">      print(os.environ[&#x27;PATH&#x27;])</span></span><br><span class="line"><span class="string"></span>    <span class="attr">shell:</span> <span class="string">python</span></span><br></pre></td></tr></table></figure><p>语法：<code>jobs.&lt;job_id&gt;.steps[*].with</code>：定义变量，可以被hello_world所访问</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">my_first_job:</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">My</span> <span class="string">first</span> <span class="string">step</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/hello_world@main</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">first_name:</span> <span class="string">Mona</span></span><br><span class="line">          <span class="attr">middle_name:</span> <span class="string">The</span></span><br><span class="line">          <span class="attr">last_name:</span> <span class="string">Octocat</span></span><br></pre></td></tr></table></figure><p>语法：</p><ul><li><code>jobs.&lt;job_id&gt;.steps[*].with.args</code>：文档解释『A <code>string</code> that defines the inputs for a Docker container. GitHub passes the <code>args</code> to the container’s <code>ENTRYPOINT</code> when the container starts up』，我的理解是给docker容器启动时传入参数？第二个坑</li><li><code>jobs.&lt;job_id&gt;.steps[*].with.entrypoint</code>：覆盖Dockerfile中的ENTRYPOINT</li></ul><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">steps:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Explain</span> <span class="string">why</span> <span class="string">this</span> <span class="string">job</span> <span class="string">ran</span></span><br><span class="line">    <span class="attr">uses:</span> <span class="string">octo-org/action-name@main</span></span><br><span class="line">    <span class="attr">with:</span></span><br><span class="line">      <span class="attr">entrypoint:</span> <span class="string">/bin/echo</span></span><br><span class="line">      <span class="attr">args:</span> <span class="string">The</span> <span class="string">$&#123;&#123;</span> <span class="string">github.event_name</span> <span class="string">&#125;&#125;</span> <span class="string">event</span> <span class="string">triggered</span> <span class="string">this</span> <span class="string">step.</span></span><br></pre></td></tr></table></figure><p>语法：<code>jobs.&lt;job_id&gt;.steps[*].env</code>、<code>jobs.&lt;job_id&gt;.env</code>：传入变量</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">steps:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">My</span> <span class="string">first</span> <span class="string">action</span></span><br><span class="line">    <span class="attr">env:</span></span><br><span class="line">      <span class="attr">GITHUB_TOKEN:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITHUB_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">      <span class="attr">FIRST_NAME:</span> <span class="string">Mona</span></span><br><span class="line">      <span class="attr">LAST_NAME:</span> <span class="string">Octocat</span></span><br></pre></td></tr></table></figure><p>语法：</p><ul><li><code>jobs.&lt;job_id&gt;.steps[*].continue-on-error: true</code>：表示，此步运行失败时，工作流仍继续执行下一个任务</li><li><code>jobs.&lt;job_id&gt;.steps[*].timeout-minutes</code>：任务最大执行时间</li><li><code>jobs.&lt;job_id&gt;.timeout-minutes</code>：作业最大执行时间，默认360min</li><li><code>jobs.&lt;job_id&gt;.strategy.matrix</code>：使用矩阵策略</li></ul><p>可以使用矩阵策略，两个操作系统会分别在三个版本下分别运行即6个作业</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">example_matrix:</span></span><br><span class="line">    <span class="attr">strategy:</span></span><br><span class="line">      <span class="attr">matrix:</span></span><br><span class="line">        <span class="attr">os:</span> [<span class="string">ubuntu-22.04</span>, <span class="string">ubuntu-20.04</span>]</span><br><span class="line">        <span class="attr">version:</span> [<span class="number">10</span>, <span class="number">12</span>, <span class="number">14</span>]</span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">$&#123;&#123;</span> <span class="string">matrix.os</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/setup-node@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">$&#123;&#123;</span> <span class="string">matrix.version</span> <span class="string">&#125;&#125;</span></span><br></pre></td></tr></table></figure><p>语法：<code>jobs.&lt;job_id&gt;.strategy.matrix.include</code>：include下是一个列表，如果对象中的键:值对均未覆盖任何原始矩阵值，则会将键:值对添加到每个矩阵组合中。 如果对象不能添加到任何矩阵组合中，将改为创建新的矩阵组合。</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">strategy:</span></span><br><span class="line">  <span class="attr">matrix:</span></span><br><span class="line">    <span class="attr">fruit:</span> [<span class="string">apple</span>, <span class="string">pear</span>]</span><br><span class="line">    <span class="attr">animal:</span> [<span class="string">cat</span>, <span class="string">dog</span>]</span><br><span class="line">    <span class="attr">include:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">color:</span> <span class="string">pink</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">color:</span> <span class="string">green</span></span><br><span class="line">        <span class="attr">animal:</span> <span class="string">cat</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">fruit:</span> <span class="string">apple</span></span><br><span class="line">        <span class="attr">shape:</span> <span class="string">circle</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">fruit:</span> <span class="string">banana</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">fruit:</span> <span class="string">banana</span></span><br><span class="line">        <span class="attr">animal:</span> <span class="string">cat</span></span><br></pre></td></tr></table></figure><p>解释</p><ul><li><code>&#123;color: green&#125;</code> 添加到所有原始矩阵组合，因为它可以添加，而不会覆盖原始组合的任何部分。</li><li><code>&#123;color: pink, animal: cat&#125;</code> 仅将 <code>color:pink</code> 添加到包含 <code>animal: cat</code> 的原始矩阵组合中。 这会覆盖上一个 <code>include</code> 条目添加的 <code>color: green</code>。</li><li><code>&#123;fruit: apple, shape: circle&#125;</code> 仅将 <code>shape: circle</code> 添加到包含 <code>fruit: apple</code> 的原始矩阵组合中。</li><li><code>&#123;fruit: banana&#125;</code> 添加到任何原始矩阵组合时都会覆盖值，因此会将其作为其他矩阵组合进行添加。</li><li><code>&#123;fruit: banana, animal: cat&#125;</code> 添加到任何原始矩阵组合时都会覆盖值，因此会将其作为其他矩阵组合进行添加。 它不会添加到 <code>&#123;fruit: banana&#125;</code> 矩阵组合中，因为该组合不是原始矩阵组合之一</li></ul><p>即生成六个作业</p><ul><li><code>&#123;fruit: apple, animal: cat, color: pink, shape: circle&#125;</code></li><li><code>&#123;fruit: apple, animal: dog, color: green, shape: circle&#125;</code></li><li><code>&#123;fruit: pear, animal: cat, color: pink&#125;</code></li><li><code>&#123;fruit: pear, animal: dog, color: green&#125;</code></li><li><code>&#123;fruit: banana&#125;</code></li><li><code>&#123;fruit: banana, animal: cat&#125;</code></li></ul><p>工作流将运行六个作业，其中针对每个 <code>os</code> 和 <code>node</code> 变量组合提供一个作业。 当对应于 <code>windows-latest</code> 的 <code>os</code> 值和 <code>16</code> 的 <code>node</code> 值的作业运行时，作业中将包含一个被称为 <code>npm</code> 且值为 <code>6</code> 的其他变量</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">example_matrix:</span></span><br><span class="line">    <span class="attr">strategy:</span></span><br><span class="line">      <span class="attr">matrix:</span></span><br><span class="line">        <span class="attr">os:</span> [<span class="string">windows-latest</span>, <span class="string">ubuntu-latest</span>]</span><br><span class="line">        <span class="attr">node:</span> [<span class="number">12</span>, <span class="number">14</span>, <span class="number">16</span>]</span><br><span class="line">        <span class="attr">include:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">os:</span> <span class="string">windows-latest</span></span><br><span class="line">            <span class="attr">node:</span> <span class="number">16</span></span><br><span class="line">            <span class="attr">npm:</span> <span class="number">6</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">$&#123;&#123;</span> <span class="string">matrix.os</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/setup-node@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">$&#123;&#123;</span> <span class="string">matrix.node</span> <span class="string">&#125;&#125;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">if:</span> <span class="string">$&#123;&#123;</span> <span class="string">matrix.npm</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">-g</span> <span class="string">npm@$&#123;&#123;</span> <span class="string">matrix.npm</span> <span class="string">&#125;&#125;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">--version</span></span><br></pre></td></tr></table></figure><p>将运行 10 个作业，矩阵中每个 <code>os</code> 和 <code>version</code> 的组合一个作业，再加上一个用于 <code>windows-latest</code> 的 <code>os</code> 值和 <code>17</code> 的 <code>version</code> 值的作业</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">example_matrix:</span></span><br><span class="line">    <span class="attr">strategy:</span></span><br><span class="line">      <span class="attr">matrix:</span></span><br><span class="line">        <span class="attr">os:</span> [<span class="string">macos-latest</span>, <span class="string">windows-latest</span>, <span class="string">ubuntu-latest</span>]</span><br><span class="line">        <span class="attr">version:</span> [<span class="number">12</span>, <span class="number">14</span>, <span class="number">16</span>]</span><br><span class="line">        <span class="attr">include:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">os:</span> <span class="string">windows-latest</span></span><br><span class="line">            <span class="attr">version:</span> <span class="number">17</span></span><br></pre></td></tr></table></figure><p>工作流将运行两个作业，每个 <code>include</code> 一个作业。 这样你可以利用矩阵策略，而无需完全填充矩阵</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">includes_only:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">strategy:</span></span><br><span class="line">      <span class="attr">matrix:</span></span><br><span class="line">        <span class="attr">include:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">site:</span> <span class="string">&quot;production&quot;</span></span><br><span class="line">            <span class="attr">datacenter:</span> <span class="string">&quot;site-a&quot;</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">site:</span> <span class="string">&quot;staging&quot;</span></span><br><span class="line">            <span class="attr">datacenter:</span> <span class="string">&quot;site-b&quot;</span></span><br></pre></td></tr></table></figure><p>语法：<code>jobs.&lt;job_id&gt;.strategy.matrix.exclude</code>：移除矩阵中定义的特定配置</p><p>工作流将运行 9 个作业：每 12 个配置一个作业，再减去一个与 <code>&#123;os: macos-latest, version: 12, environment: production&#125;</code> 匹配的排除作业，以及两个与 <code>&#123;os: windows-latest, version: 16&#125;</code> 匹配的排除作业</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">strategy:</span></span><br><span class="line">  <span class="attr">matrix:</span></span><br><span class="line">    <span class="attr">os:</span> [<span class="string">macos-latest</span>, <span class="string">windows-latest</span>]</span><br><span class="line">    <span class="attr">version:</span> [<span class="number">12</span>, <span class="number">14</span>, <span class="number">16</span>]</span><br><span class="line">    <span class="attr">environment:</span> [<span class="string">staging</span>, <span class="string">production</span>]</span><br><span class="line">    <span class="attr">exclude:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">os:</span> <span class="string">macos-latest</span></span><br><span class="line">        <span class="attr">version:</span> <span class="number">12</span></span><br><span class="line">        <span class="attr">environment:</span> <span class="string">production</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">os:</span> <span class="string">windows-latest</span></span><br><span class="line">        <span class="attr">version:</span> <span class="number">16</span></span><br><span class="line"><span class="attr">runs-on:</span> <span class="string">$&#123;&#123;</span> <span class="string">matrix.os</span> <span class="string">&#125;&#125;</span></span><br></pre></td></tr></table></figure><p>语法：</p><ul><li><code>jobs.&lt;job_id&gt;.strategy.fail-fast</code>：设置为 <code>true</code>，则在矩阵中的任何作业失败的情况下，GitHub 将取消矩阵中所有正在进行和加入队列的作业。 此属性的默认值为 <code>true</code></li><li><code>jobs.&lt;job_id&gt;.continue-on-error</code> ：适用于单个作业。 如果 <code>jobs.&lt;job_id&gt;.continue-on-error</code> 为 <code>true</code>，即使具有 <code>jobs.&lt;job_id&gt;.continue-on-error: true</code> 的作业失败，矩阵中的其他作业也将继续运行</li></ul><p>可以同时使用 <code>jobs.&lt;job_id&gt;.strategy.fail-fast</code> 和 <code>jobs.&lt;job_id&gt;.continue-on-error</code>。 例如，以下工作流将启动四个作业。 对于每个作业，<code>continue-on-error</code> 都由 <code>matrix.experimental</code> 的值确定。 如果任何具有 <code>continue-on-error: false</code> 的作业失败，所有正在进行或加入队列的作业都将被取消。 如果具有 <code>continue-on-error: true</code> 的作业失败，则其他作业将不会受到影响</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">test:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">continue-on-error:</span> <span class="string">$&#123;&#123;</span> <span class="string">matrix.experimental</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">strategy:</span></span><br><span class="line">      <span class="attr">fail-fast:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">matrix:</span></span><br><span class="line">        <span class="attr">version:</span> [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]</span><br><span class="line">        <span class="attr">experimental:</span> [<span class="literal">false</span>]</span><br><span class="line">        <span class="attr">include:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">version:</span> <span class="number">9</span></span><br><span class="line">            <span class="attr">experimental:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>语法：<code>jobs.&lt;job_id&gt;.strategy.max-parallel</code>：GitHub 将根据运行器的可用性将并行运行的作业数最大化</p><p>工作流一次最多运行两个作业，即使运行器可同时运行六个作业</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">example_matrix:</span></span><br><span class="line">    <span class="attr">strategy:</span></span><br><span class="line">      <span class="attr">max-parallel:</span> <span class="number">2</span></span><br><span class="line">      <span class="attr">matrix:</span></span><br><span class="line">        <span class="attr">version:</span> [<span class="number">10</span>, <span class="number">12</span>, <span class="number">14</span>]</span><br><span class="line">        <span class="attr">os:</span> [<span class="string">ubuntu-latest</span>, <span class="string">windows-latest</span>]</span><br></pre></td></tr></table></figure><p>关于docker，这部分挺好理解的，跟compose.yaml差不多，所以简述了</p><p><code>jobs.&lt;job_id&gt;.container</code>：创建一个容器</p><p><code>jobs.&lt;job_id&gt;.container.image</code>：定义要用作运行操作的容器的 Docker 映像</p><p><code>jobs.&lt;job_id&gt;.container.credentials</code>：映像的容器注册表需要身份验证才能拉取映像</p><p><code>jobs.&lt;job_id&gt;.container.env</code>：容器中设置环境变量</p><p><code>jobs.&lt;job_id&gt;.container.ports</code>：容器的端口</p><p><code>jobs.&lt;job_id&gt;.container.volumes</code>：挂载卷</p><p><code>jobs.&lt;job_id&gt;.container.options</code>：容器的其它选项</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">CI</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span> [ <span class="string">main</span> ]</span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">container-test-job:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">container:</span></span><br><span class="line">      <span class="comment"># 验证身份</span></span><br><span class="line">      <span class="attr">username:</span> <span class="string">$&#123;&#123;</span> <span class="string">github.actor</span> <span class="string">&#125;&#125;</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.github_token</span> <span class="string">&#125;&#125;</span></span><br><span class="line">      <span class="attr">image:</span> <span class="string">node:14.16</span></span><br><span class="line">      <span class="attr">env:</span></span><br><span class="line">        <span class="attr">NODE_ENV:</span> <span class="string">development</span></span><br><span class="line">      <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="number">80</span></span><br><span class="line">      <span class="attr">volumes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">my_docker_volume:/volume_mount</span></span><br><span class="line">      <span class="attr">options:</span> <span class="string">--cpus</span> <span class="number">1</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Check</span> <span class="string">for</span> <span class="string">dockerenv</span> <span class="string">file</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">(ls</span> <span class="string">/.dockerenv</span> <span class="string">&amp;&amp;</span> <span class="string">echo</span> <span class="string">Found</span> <span class="string">dockerenv)</span> <span class="string">||</span> <span class="string">(echo</span> <span class="literal">No</span> <span class="string">dockerenv)</span></span><br></pre></td></tr></table></figure><p><code>jobs.&lt;job_id&gt;.services</code>：If you configure the job to run directly on the runner machine and your step doesn’t use a container action, you must map any required Docker service container ports to the Docker host (the runner machine). You can access the service container using localhost and the mapped port.译：如果您将作业配置为直接在运行程序机器上运行，并且您的步骤不使用容器操作，那么您必须将任何所需的Docker服务容器端口映射到Docker主机(运行程序机器)</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">nginx:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="comment"># Map port 8080 on the Docker host to port 80 on the nginx container</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8080</span><span class="string">:80</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">redis</span></span><br><span class="line">    <span class="comment"># Map TCP port 6379 on Docker host to a random free port on the Redis container</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">6379</span><span class="string">/tcp</span></span><br></pre></td></tr></table></figure><h3 id="Secret"><a href="#Secret" class="headerlink" title="Secret"></a>Secret</h3><p>前文，写了很多类似于<strong>『secret.xxx』</strong>的东西，在写Actions时，文件或者仓库中可能会涉及一些密码不希望被泄露，可以在在仓库下『Setting-&gt;Secrets-&gt;Actions』定义的该变量，之后在Actions中读取</p><h2 id="三、Rule"><a href="#三、Rule" class="headerlink" title="三、Rule"></a>三、Rule</h2><p>Github Actions并非完全免费，但对于日常使用足够</p><p>以官方最新说明为主：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.github.com/en/actions/learn-github-actions/usage-limits-billing-and-administration">Usage limits, billing, and administration - GitHub Docs</a></p><div class="tabs" id="github-actions"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#github-actions-1">English</button></li><li class="tab"><button type="button" data-href="#github-actions-2">小张直译</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="github-actions-1"><ul><li><p><strong>Job execution time</strong> - Each job in a workflow can run for up to 6 hours of execution time. If a job reaches this limit, the job is terminated and fails to complete.</p></li><li><p><strong>Workflow run time</strong> - Each workflow run is limited to 35 days. If a workflow run reaches this limit, the workflow run is cancelled. This period includes execution duration, and time spent on waiting and approval.</p></li><li><p><strong>API requests</strong> - You can execute up to 1000 requests to the GitHub API in an hour across all actions within a repository. If requests are exceeded, additional API calls will fail which might cause jobs to fail.</p></li><li><p><strong>Concurrent jobs</strong> - The number of concurrent jobs you can run in your account depends on your GitHub plan, as indicated in the following table. If exceeded, any additional jobs are queued.</p><table><thead><tr><th align="left">GitHub plan</th><th align="left">Total concurrent jobs</th><th align="left">Maximum concurrent macOS jobs</th></tr></thead><tbody><tr><td align="left">Free</td><td align="left">20</td><td align="left">5</td></tr><tr><td align="left">Pro</td><td align="left">40</td><td align="left">5</td></tr><tr><td align="left">Team</td><td align="left">60</td><td align="left">5</td></tr><tr><td align="left">Enterprise</td><td align="left">180</td><td align="left">50</td></tr></tbody></table></li><li><p><strong>Job matrix</strong> - A job matrix can generate a maximum of 256 jobs per workflow run. This limit applies to both GitHub-hosted and self-hosted runners.</p></li><li><p><strong>Workflow run queue</strong> - No more than 500 workflow runs can be queued in a 10 second interval per repository. If a workflow run reaches this limit, the workflow run is terminated and fails to complete.</p></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="github-actions-2"><ul><li><p>作业时间：每一个作业运行时间不得超过6小时，如果超过六小时，这个作业将会终止而无法完成</p></li><li><p>工作流时间：每一个工作流不得超过35天，如果超出此限制，这个工作流将被取消，此时间段包括执行持续时间以及等待和批准所花费的时间</p></li><li><p>API请求：在同一个仓库中一个小时内最多可以执行1000次API请求，如果请求超出，API将调用失败可能导致作业失败</p></li><li><p>并发作业：账户中可以运行的并发数量取决于Github计划，如果超出将排队作业</p><table><thead><tr><th align="left">GitHub plan</th><th align="left">并发数量</th><th align="left">MacOS 最大并发数</th></tr></thead><tbody><tr><td align="left">Free</td><td align="left">20</td><td align="left">5</td></tr><tr><td align="left">Pro</td><td align="left">40</td><td align="left">5</td></tr><tr><td align="left">Team</td><td align="left">60</td><td align="left">5</td></tr><tr><td align="left">Enterprise</td><td align="left">180</td><td align="left">50</td></tr></tbody></table></li><li><p>作业矩阵：一个作业中的矩阵最多可以生成256个，此限制适用于 Github 托管（GitHub-hosted）和自托管运行（self-hosted runners）</p></li><li><p>工作流队列：每一个仓库不超过500个工作流可以被排队，间隔10s。如果超出限制，这个工作流将终止且运行失败</p></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="四、自用整理常用Actions"><a href="#四、自用整理常用Actions" class="headerlink" title="四、自用整理常用Actions"></a>四、自用整理常用Actions</h2><p>善用<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/marketplace?type=actions">GitHub Marketplace</a>会减少我们做Actions的工作量，以下为自己常用的Actions</p><h3 id="Clone-From-Github"><a href="#Clone-From-Github" class="headerlink" title="Clone From Github"></a>Clone From Github</h3><p>需要对当前仓库操作时，手撕版</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Clone</span></span><br><span class="line">  <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">    git clone 仓库地址</span></span><br><span class="line"><span class="string">    cd 仓库名</span></span><br></pre></td></tr></table></figure><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/marketplace/actions/checkout">Checkout</a>：最常见的Actions，clone当前仓库的默认分支，指定<strong>仓库&#x2F;分支</strong>详见文档</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br></pre></td></tr></table></figure><h3 id="Environment"><a href="#Environment" class="headerlink" title="Environment"></a>Environment</h3><p>Ubuntu自带py环境但没有node环境</p><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/marketplace/actions/setup-python">Setup Python</a>：python环境</p><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/marketplace/actions/setup-node-js-environment">Setup Node.js environment</a>：nodejs</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 默认版本由 runs-on 决定</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Python</span> </span><br><span class="line">  <span class="attr">uses:</span> <span class="string">actions/setup-python@v4</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">python-version:</span> <span class="number">3.8</span></span><br><span class="line">    </span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Node</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">actions/setup-node@v3</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">node-version:</span> <span class="string">&quot;12.x&quot;</span></span><br></pre></td></tr></table></figure><h3 id="Push-To-GitHub"><a href="#Push-To-GitHub" class="headerlink" title="Push To GitHub"></a>Push To GitHub</h3><p>当工作流对仓库工作区改动需要push时，手撕版</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Commit</span> <span class="string">&amp;</span> <span class="string">Push</span></span><br><span class="line">  <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">    git config user.name github-actions[bot]</span></span><br><span class="line"><span class="string">    git config user.email github-actions[bot]@users.noreply.github.com</span></span><br><span class="line"><span class="string">    git add -A .</span></span><br><span class="line"><span class="string">    git commit -m &quot;Commit &amp; Push&quot;</span></span><br><span class="line"><span class="string">    git push</span></span><br></pre></td></tr></table></figure><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/EndBug/add-and-commit">EndBug&#x2F;add-and-commit</a>：简化push</p><table><thead><tr><th>参数</th><th>说明</th><th>默认</th><th>示例</th></tr></thead><tbody><tr><td>add</td><td>添加暂存区文件</td><td>add: ‘.’</td><td>add: ‘src’</td></tr><tr><td>author_name</td><td>用户名</td><td>作者用户名</td><td></td></tr><tr><td>author_email</td><td>邮箱</td><td>作者邮箱</td><td></td></tr><tr><td>commit</td><td>提交信息</td><td>commit: ‘’</td><td>commit: ‘Commit &amp; Push’</td></tr></tbody></table><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Push</span> <span class="string">to</span> <span class="string">GitHub</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">EndBug/add-and-commit@v7.2.1</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">message:</span> <span class="string">&#x27;Commit &amp; Push&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="主页美化"><a href="#主页美化" class="headerlink" title="主页美化"></a>主页美化</h3><blockquote><p>美化效果：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/GC-ZF/GC-ZF">GC-ZF&#x2F;GC-ZF: My GitHub profile.</a></p></blockquote><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/marketplace/actions/blog-post-workflow">Blog Post Workflow</a>：拉取最新博文</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 参考：https://github.com/CCKNBC/CCKNBC</span></span><br><span class="line"><span class="comment"># Actions1：https://github.com/marketplace/actions/delete-workflow-runs</span></span><br><span class="line"><span class="comment"># Actions2：https://github.com/marketplace/actions/blog-post-workflow</span></span><br><span class="line"><span class="attr">name:</span> <span class="string">update</span> <span class="string">blog</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">schedule:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">cron:</span> <span class="string">&#x27;0 0 * * *&#x27;</span></span><br><span class="line">  <span class="attr">workflow_dispatch:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">env:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment"># 具体参数看文档</span></span><br><span class="line">    <span class="comment"># feed_list 必填 rss地址</span></span><br><span class="line">    <span class="comment"># max_post_count 必填 获取文章数</span></span><br><span class="line">    <span class="comment"># reade_path 选填 默认写入README</span></span><br><span class="line">    <span class="comment"># template 选填 生成模版 emojikey随机表情 默认为[$title]($url)</span></span><br><span class="line">    <span class="comment"># date_format 选填 修改模版中日期格式 默认英文 </span></span><br><span class="line">    <span class="comment"># committer_username和committer_email 选填 提交信息</span></span><br><span class="line">    <span class="comment"># filter_dates 选填 daysAgo/10/代表只获取近10天博文 ， currentMonth只获取当月博文， currentYear只获取当年博文</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">blog-post-workflow</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">gautamkrishnar/blog-post-workflow@master</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">feed_list:</span> <span class="string">&quot;https://zhsher.cn/feed.xml&quot;</span></span><br><span class="line">        <span class="attr">max_post_count:</span> <span class="number">5</span></span><br><span class="line">        <span class="attr">readme_path:</span> <span class="string">&quot;./README.md&quot;</span></span><br><span class="line">        <span class="attr">template:</span> <span class="string">&quot;$newline - $emojiKey(💯,🔥,💫,🚀,🌮,💫) $date [$title]($url)&quot;</span></span><br><span class="line">        <span class="attr">date_format:</span> <span class="string">&quot;yyyy年mm月dd日&quot;</span></span><br><span class="line">        <span class="attr">committer_username:</span> <span class="string">&quot;github-actions[bot]&quot;</span></span><br><span class="line">        <span class="attr">committer_email:</span> <span class="string">&quot;github-actions[bot]@users.noreply.github.com&quot;</span></span><br><span class="line">        <span class="attr">filter_dates:</span> <span class="string">&quot;currentYear&quot;</span></span><br><span class="line">        </span><br><span class="line">     <span class="comment"># 删除近retain_days天的Workflow日志</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Delete</span> <span class="string">Workflow</span> <span class="string">Runs</span></span><br><span class="line">       <span class="attr">uses:</span> <span class="string">Mattraks/delete-workflow-runs@main</span></span><br><span class="line">       <span class="attr">with:</span></span><br><span class="line">         <span class="attr">retain_days:</span> <span class="number">10</span></span><br><span class="line">         <span class="attr">keep_minimum_runs:</span> <span class="number">1</span></span><br></pre></td></tr></table></figure><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/marketplace/actions/github-profile-3d-contrib">GitHub-Profile-3D-Contrib</a>：绘制3D贡献图</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">GitHub-Profile-3D-Contrib</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">schedule:</span> </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">cron:</span> <span class="string">&quot;0 0 * * *&quot;</span></span><br><span class="line">  <span class="attr">workflow_dispatch:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">generate-github-profile-3d-contrib</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">      </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">yoshi389111/github-profile-3d-contrib@0.5.0</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">GITHUB_TOKEN:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITHUB_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">USERNAME:</span> <span class="string">$&#123;&#123;</span> <span class="string">github.repository_owner</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Commit</span> <span class="string">&amp;</span> <span class="string">Push</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          S=$(curl &#x27;https://v1.hitokoto.cn/?c=a&amp;encode=text&#x27;)</span></span><br><span class="line"><span class="string">          git config user.name github-actions[bot]</span></span><br><span class="line"><span class="string">          git config user.email github-actions[bot]@users.noreply.github.com</span></span><br><span class="line"><span class="string">          git add -A .</span></span><br><span class="line"><span class="string">          git commit -m &quot;:rocket: $&#123;S&#125;&quot;</span></span><br><span class="line"><span class="string">          git push</span></span><br></pre></td></tr></table></figure><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/Platane/snk">Platane&#x2F;snk</a>：贪吃蛇版贡献图</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Generate</span> <span class="string">Snake</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">schedule:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">cron:</span> <span class="string">&quot;0 0 * * *&quot;</span></span><br><span class="line">  <span class="attr">workflow_dispatch:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v2.3.4</span></span><br><span class="line">      </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Generate</span> <span class="string">Snake</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">Platane/snk@master</span></span><br><span class="line">        <span class="attr">id:</span> <span class="string">snake-gif</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">github_user_name:</span> <span class="string">$&#123;&#123;</span> <span class="string">github.repository_owner</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">gif_out_path:</span> <span class="string">./contribution-snake/github-contribution-grid-snake.gif</span></span><br><span class="line">          <span class="attr">svg_out_path:</span> <span class="string">./contribution-snake/github-contribution-grid-snake.svg</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Push</span> <span class="string">to</span> <span class="string">GitHub</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">EndBug/add-and-commit@v7.2.1</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">author_name:</span> <span class="string">github-actions[bot]</span></span><br><span class="line">          <span class="attr">author_email:</span> <span class="string">github-actions[bot]@users.noreply.github.com</span></span><br><span class="line">          <span class="attr">branch:</span> <span class="string">main</span></span><br><span class="line">          <span class="attr">message:</span> <span class="string">&#x27;:rocket: Update&#x27;</span></span><br></pre></td></tr></table></figure><p>其它美化Actions：</p><ul><li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/anmol098/waka-readme-stats">anmol098&#x2F;waka-readme-stats</a></li></ul><h3 id="Github-sync-to-other-repo"><a href="#Github-sync-to-other-repo" class="headerlink" title="Github sync to other repo"></a>Github sync to other repo</h3><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/marketplace/actions/mirror-a-repository-using-ssh">Mirror a repository using SSH</a>：同步Github中的仓库到其它平台</p><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/marketplace/actions/gitee-pages-action">Gitee Pages Action · Actions</a>：如果需要开启Gitee Page，参考此Actions</p><p>以Github同步Gitee为例：</p><ol><li><p><code>ssh-keygen -t rsa -C &quot;任意命名&quot; -f &quot;id_rsa_github to gitee&quot;</code> 生成 SSH Key。(⚠️注意<strong>直接连续三次回车</strong>，此处不要设置密码，生成的公私钥用于下面 GitHub &#x2F; Gitee 的配置，以保证公私钥成对，否则从 GitHub -&gt; Gitee 的同步将会失败)。生成的 <code>id_rsa_github to gitee</code> 是私钥，<code>id_rsa_github to gitee.pub</code> 是公钥</p></li><li><p>在仓库 的「Settings -&gt; Secrets」路径下配置好命名为 <code>GITEE_RSA_PRIVATE_KEY</code> 和 <code>GITEE_PASSWORD</code> 的两个变量。其中：<code>GITEE_RSA_PRIVATE_KEY</code> 存放 <code>id_rsa</code> 私钥；<code>GITEE_PASSWORD</code> 存放 Gitee 帐号的密码</p></li></ol><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://test1.jsdelivr.net/gh/yanglbme/gitee-pages-action/images/add_secrets.png"></p><ol start="3"><li>在 GitHub 的个人设置页面「<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/settings/keys">Settings -&gt; SSH and GPG keys</a>」配置 SSH 公钥（即：<code>id_rsa_github to gitee.pub</code>），命名随意</li><li>在 Gitee 的个人设置页面「<a target="_blank" rel="noopener external nofollow noreferrer" href="https://gitee.com/profile/sshkeys">安全设置 -&gt; SSH 公钥</a>」配置 SSH 公钥（即：<code>id_rsa_github to gitee.pub</code>），命名随意</li></ol><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Sync</span> <span class="string">to</span> <span class="string">Gitee</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">wearerequired/git-mirror-action@master</span></span><br><span class="line">  <span class="attr">env:</span></span><br><span class="line">    <span class="comment"># 注意在 Settings-&gt;Secrets 配置 GITEE_RSA_PRIVATE_KEY</span></span><br><span class="line">    <span class="attr">SSH_PRIVATE_KEY:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITEE_RSA_PRIVATE_KEY</span> <span class="string">&#125;&#125;</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="comment"># 注意替换为你的 GitHub 源仓库地址</span></span><br><span class="line">    <span class="attr">source-repo:</span> <span class="string">git@github.com:doocs/leetcode.git</span></span><br><span class="line">    <span class="comment"># 注意替换为你的 Gitee 目标仓库地址</span></span><br><span class="line">    <span class="attr">destination-repo:</span> <span class="string">git@gitee.com:Doocs/leetcode.git</span></span><br></pre></td></tr></table></figure><h3 id="操作云服务器"><a href="#操作云服务器" class="headerlink" title="操作云服务器"></a>操作云服务器</h3><p>手撕版，<code>DEPLOY_PRI</code>为连接服务器的私钥</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">ssh</span></span><br><span class="line">  <span class="attr">env:</span></span><br><span class="line">    <span class="attr">DEPLOY_PRI:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DEPLOY_PRI</span> <span class="string">&#125;&#125;</span></span><br><span class="line">  <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">    sudo timedatectl set-timezone &quot;Asia/Shanghai&quot;</span></span><br><span class="line"><span class="string">    mkdir -p ~/.ssh/</span></span><br><span class="line"><span class="string">    echo &quot;$DEPLOY_PRI&quot; &gt; ~/.ssh/id_rsa</span></span><br><span class="line"><span class="string">    chmod 600 ~/.ssh/id_rsa</span></span><br><span class="line"><span class="string">    ssh-keyscan 服务器ip &gt;&gt; ~/.ssh/known_hosts</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">    <span class="string">ssh</span> <span class="string">ubuntu@服务器ip</span> </span><br><span class="line">    <span class="string">&quot;</span></span><br><span class="line"><span class="string">    shell命令，一行一个</span></span><br><span class="line"><span class="string">    cd /xxx/</span></span><br><span class="line"><span class="string">    ls</span></span><br><span class="line"><span class="string">    &quot;</span></span><br></pre></td></tr></table></figure><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/marketplace/actions/ssh-pipeline">ssh-pipeline</a>：连接服务器并对服务器操作</p><table><thead><tr><th>参数</th><th>说明</th><th>默认</th></tr></thead><tbody><tr><td>host*</td><td>ip</td><td></td></tr><tr><td>user*</td><td>用户</td><td></td></tr><tr><td>pass（与key二选一）</td><td>密码</td><td></td></tr><tr><td>key（与pass二选一）</td><td>私钥</td><td></td></tr><tr><td>port</td><td>端口</td><td>22</td></tr><tr><td>connect_timeout</td><td>连接超时时间</td><td>30s</td></tr><tr><td>script</td><td>命令</td><td></td></tr></tbody></table><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">ssh</span> <span class="string">pipelines</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">cross-the-world/ssh-pipeline@master</span></span><br><span class="line">  <span class="attr">env:</span></span><br><span class="line">    <span class="attr">WELCOME:</span> <span class="string">&quot;ssh pipeline&quot;</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DC_HOST</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">user:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DC_USER</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">pass:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DC_PASS</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">port:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DC_PORT</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">connect_timeout:</span> <span class="string">10s</span></span><br><span class="line">    <span class="attr">script:</span> <span class="string">|</span></span><br><span class="line"><span class="string">      (rm -rf /home/github/test || true)</span></span><br><span class="line"><span class="string">      ls -la  </span></span><br><span class="line"><span class="string">      echo $WELCOME </span></span><br><span class="line"><span class="string">      mkdir -p /home/github/test/test1 &amp;&amp; </span></span><br><span class="line"><span class="string">      mkdir -p /home/github/test/test2 &amp;&amp;</span></span><br></pre></td></tr></table></figure><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/marketplace/actions/ssh-scp-ssh-pipelines">ssh-scp-ssh-pipelines</a>：同一作者的优化版，与上表不同的是去除了<code>script</code>，新增</p><ul><li><code>first_ssh</code>：scp之前需要做的命令</li><li><code>scp</code>：sync copy，复制本地到服务器中，支持正则</li><li><code>last_ssh</code>：scp之后需要做的命令</li></ul><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">ssh</span> <span class="string">scp</span> <span class="string">ssh</span> <span class="string">pipelines</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">cross-the-world/ssh-scp-ssh-pipelines@latest</span></span><br><span class="line">  <span class="attr">env:</span></span><br><span class="line">    <span class="attr">WELCOME:</span> <span class="string">&quot;ssh scp ssh pipelines&quot;</span></span><br><span class="line">    <span class="attr">LASTSSH:</span> <span class="string">&quot;Doing something after copying&quot;</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DC_HOST</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">user:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DC_USER</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">pass:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DC_PASS</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">port:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DC_PORT</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">connect_timeout:</span> <span class="string">10s</span></span><br><span class="line">    <span class="attr">first_ssh:</span> <span class="string">|</span></span><br><span class="line"><span class="string">      rm -rf /home/github/test</span></span><br><span class="line"><span class="string">      ls -la  \necho $WELCOME </span></span><br><span class="line"><span class="string">      mkdir -p /home/github/test/test1 &amp;&amp; </span></span><br><span class="line"><span class="string">      mkdir -p /home/github/test/test2 &amp;&amp;</span></span><br><span class="line"><span class="string"></span>    <span class="attr">scp:</span> <span class="string">|</span></span><br><span class="line"><span class="string">      &#x27;./test/*&#x27; =&gt; /home/github/test/</span></span><br><span class="line"><span class="string">      ./test/test1* =&gt; /home/github/test/test1/</span></span><br><span class="line"><span class="string">      ./test/test*.csv =&gt; &quot;/home/github/test/test2/&quot;</span></span><br><span class="line"><span class="string"></span>    <span class="attr">last_ssh:</span> <span class="string">|</span></span><br><span class="line"><span class="string">      echo $LASTSSH &amp;&amp; </span></span><br><span class="line"><span class="string">      (mkdir test1/test || true)</span></span><br><span class="line"><span class="string">      || ls -la</span></span><br></pre></td></tr></table></figure><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/marketplace/actions/ssh-deploy">ssh deploy</a>：更倾向于服务器同步文件操作的工作流，最大的特点是利用 <code>rsync</code>（remote sync 远程同步）命令备份数据时，不会直接覆盖以前的数据，而是先判断已经存在的数据和新数据的差异，只有数据不同时才会把不相同的部分覆盖，所以速度上会很快</p><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>SSH_PRIVATE_KEY*</td><td>服务器私钥</td></tr><tr><td>ARGS*</td><td>rsync的参数</td></tr><tr><td>SOURCE</td><td>源路径</td></tr><tr><td>TARGET</td><td>目标路径</td></tr><tr><td>REMOTE_HOST*</td><td>服务器ip</td></tr><tr><td>REMOTE_USER*</td><td>服务器用户名</td></tr><tr><td>EXCLUDE</td><td>排除文件</td></tr><tr><td>SCRIPT_BEFORE</td><td>同步前的操作</td></tr><tr><td>SCRIPT_AFTER</td><td>同步后的操作</td></tr></tbody></table><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">to</span> <span class="string">Staging</span> <span class="string">server</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">easingthemes/ssh-deploy@main</span></span><br><span class="line">  <span class="attr">env:</span></span><br><span class="line">    <span class="attr">SSH_PRIVATE_KEY:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.SSH_PRIVATE_KEY</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">ARGS:</span> <span class="string">&quot;-rlgoDzvc -i&quot;</span></span><br><span class="line">    <span class="attr">SOURCE:</span> <span class="string">&quot;dist/&quot;</span></span><br><span class="line">    <span class="attr">REMOTE_HOST:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.REMOTE_HOST</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">REMOTE_USER:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.REMOTE_USER</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">TARGET:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.REMOTE_TARGET</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">EXCLUDE:</span> <span class="string">&quot;/dist/, /node_modules/&quot;</span></span><br><span class="line">    <span class="attr">SCRIPT_BEFORE:</span> <span class="string">|</span></span><br><span class="line"><span class="string">      whoami</span></span><br><span class="line"><span class="string">      ls -al</span></span><br><span class="line"><span class="string"></span>    <span class="attr">SCRIPT_AFTER:</span> <span class="string">|</span></span><br><span class="line"><span class="string">      whoami</span></span><br><span class="line"><span class="string">      ls -al</span></span><br><span class="line"><span class="string">      echo $RSYNC_STDOUT</span></span><br></pre></td></tr></table></figure><h3 id="小tips"><a href="#小tips" class="headerlink" title="小tips"></a>小tips</h3><blockquote><p>一些不常用的Actions及使用技巧</p></blockquote><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/ryan4yin/waline-comments-backup">waline-comments-backup</a>：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://thiscute.world/">@二花</a>的数据库备份方案，使用了gpg对文件加密，不错的点子！</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 使用 gpg 加密备份文件，需要提前生成随机密码，保存到 github action secrets 中，环境变量名称为 `COMMENTS_DECRYPT_KEY`</span></span><br><span class="line"><span class="comment"># 建议使用密码管理器备份此 gpg 密码，方便在本地做数据恢复</span></span><br><span class="line"><span class="comment"># 将数据解密到 /tmp 文件夹中（建议在需要时，在本地执行）：gpg --quiet --batch --yes --decrypt --passphrase=&quot;$COMMENTS_DECRYPT_KEY&quot; --output /tmp/waline_comments.json data/waline_comments.json.gpg</span></span><br><span class="line"><span class="string">gpg</span> <span class="string">--quiet</span> <span class="string">--batch</span> <span class="string">--yes</span> <span class="string">--passphrase=&quot;$COMMENTS_DECRYPT_KEY&quot;</span> <span class="string">--symmetric</span> <span class="string">--cipher-algo</span> <span class="string">AES256</span> <span class="string">data/waline_comments.json</span></span><br><span class="line"><span class="comment"># 删除明文的备份文件</span></span><br><span class="line"><span class="string">rm</span> <span class="string">-f</span> <span class="string">data/waline_comments.json</span></span><br></pre></td></tr></table></figure><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/dawidd6/action-send-mail">dawidd6&#x2F;action-send-mail</a>：利用Actions发送邮件</p><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/justjavac/auto-green">justjavac&#x2F;auto-green</a>：自动保持 GitHub 提交状态常绿 <strong>a commit every day, keep your girlfriend far away.</strong> （仅定时运行脚本无提交，60天后会自动关闭Actions，可以借助这个）</p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者:</span> <span class="post-copyright-info"><a href="https://zhsher.cn">张时贰</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接:</span> <span class="post-copyright-info"><a href="https://zhsher.cn/posts/7339/">https://zhsher.cn/posts/7339/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明:</span> <span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://zhsher.cn" target="_blank">张时贰</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Git/">Git</a><a class="post-meta__tags" href="/tags/Github/">Github</a></div><div class="post_share"><div class="social-share" data-image="/Hexo_img/top_img/Github%20Actions.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://npm.elemecdn.com/butterfly-extsrc@latest/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://npm.elemecdn.com/butterfly-extsrc@latest/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/Hexo_img/config/wechat.png" target="_blank"><img class="post-qr-code-img" src="/Hexo_img/config/wechat.png" alt="wechat"></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/Hexo_img/config/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/Hexo_img/config/alipay.jpg" alt="alipay"></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/53805/" title="2022 11 13 月亮还是那个月亮"><img class="cover" src="/Hexo_img/top_img/%E6%9C%88%E4%BA%AE%E8%BF%98%E6%98%AF%E9%82%A3%E4%B8%AA%E6%9C%88%E4%BA%AE.webp" onerror='onerror=null,src="/Hexo_img/config/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">2022 11 13 月亮还是那个月亮</div></div></a></div><div class="next-post pull-right"><a href="/posts/63200/" title="Docker的简单食用论"><img class="cover" src="/Hexo_img/top_img/Docker%E7%9A%84%E7%AE%80%E5%8D%95%E9%A3%9F%E7%94%A8%E8%AE%BA.png" onerror='onerror=null,src="/Hexo_img/config/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Docker的简单食用论</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/2334/" title="Git使用 从入门到入土 收藏吃灰系列"><img class="cover" src="/Hexo_img/top_img/git-github.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-05</div><div class="title">Git使用 从入门到入土 收藏吃灰系列</div></div></a></div><div><a href="/posts/61513/" title="typora+GitHub+PicGo图床教学"><img class="cover" src="/Hexo_img/top_img/typora.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-11-24</div><div class="title">typora+GitHub+PicGo图床教学</div></div></a></div></div></div><hr class="custom-hr"><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86"><span class="toc-text">一、前置知识</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84"><span class="toc-text">二、文件结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#name"><span class="toc-text">name</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#on"><span class="toc-text">on</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="toc-text">基本用法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#types"><span class="toc-text">types</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%80%8Epull-request%E3%80%8F%EF%BC%9Abranches-branches-ignore"><span class="toc-text">『pull_request』：branches &amp; branches-ignore</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%80%8Epush%E3%80%8F%EF%BC%9Abranches-tags-branches-ignore-tags-ignore"><span class="toc-text">『push』：branches &amp; tags &amp; branches-ignore &amp; tags-ignore</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%80%8Epush-pull-request%E3%80%8F%EF%BC%9Apaths-paths-ignore"><span class="toc-text">『push &amp; pull_request』：paths &amp; paths-ignore</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#schedule"><span class="toc-text">schedule</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#workflow"><span class="toc-text">workflow</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#evn"><span class="toc-text">evn</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#jobs"><span class="toc-text">jobs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Secret"><span class="toc-text">Secret</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81Rule"><span class="toc-text">三、Rule</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E8%87%AA%E7%94%A8%E6%95%B4%E7%90%86%E5%B8%B8%E7%94%A8Actions"><span class="toc-text">四、自用整理常用Actions</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Clone-From-Github"><span class="toc-text">Clone From Github</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Environment"><span class="toc-text">Environment</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Push-To-GitHub"><span class="toc-text">Push To GitHub</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E9%A1%B5%E7%BE%8E%E5%8C%96"><span class="toc-text">主页美化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Github-sync-to-other-repo"><span class="toc-text">Github sync to other repo</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-text">操作云服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8Ftips"><span class="toc-text">小tips</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-image:url('/Hexo_img/top_img/Github%20Actions.png')"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023<i id="heartbeat" class="fa fas fa-heartbeat"></i> 张时贰</div><div class="footer_custom_text"><div>满地都是六便士 我想抬头看月亮</div><p><a href="https://www.foreverblog.cn/" rel="external nofollow noreferrer" target="_blank"><img src="https://img.foreverblog.cn/logo_en_default.png" alt="" style="width:auto;height:16px"></a><a href="https://www.foreverblog.cn/go.html" rel="external nofollow noreferrer" target="_blank"><img src="https://img.foreverblog.cn/wormhole_3_tp.gif" alt="" style="width:auto;height:32px" title="穿梭虫洞-随机访问十年之约友链博客"></a></p><p><a style="margin-inline:5px" target="_blank" href="https://beian.miit.gov.cn/#/Integrated/index/" rel="external nofollow noreferrer"><img src="/Hexo_img/config/徽标01晋ICP备-2022005322号--2-e1d492.svg" title="ICP备案"></a><a style="margin-inline:5px" target="_blank" href="https://hexo.io/" rel="external nofollow noreferrer"><img src="/Hexo_img/config/徽标02Frame-Hexo-blue.svg" title="博客框架为Hexo"></a><a style="margin-inline:5px" target="_blank" href="https://butterfly.js.org/" rel="external nofollow noreferrer"><img src="/Hexo_img/config/徽标03Theme-Butterfly-6513df.svg" title="主题采用butterfly"></a><a style="margin-inline:5px" target="_blank" href="https://cloud.tencent.com/" rel="external nofollow noreferrer"><img src="/Hexo_img/config/徽标04Hosted-腾讯云-0cedbe.svg" title="本站采用双线部署，国内线路托管于腾讯云"></a><a style="margin-inline:5px" target="_blank" href="https://github.com/" rel="external nofollow noreferrer"><img src="/Hexo_img/config/徽标05Source-Github-d021d6.svg" title="本站采用双线部署，国外线路托管于Github"></a><a style="margin-inline:5px" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer"><img src="/Hexo_img/config/徽标06Copyright-BY--NC--SA 4.svg" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"></a><a style="margin-inline:5px" target="_blank" href="https://www.zhsher.cn/" rel="external nofollow noreferrer"><img src="/Hexo_img/config/徽标07CDN-腾讯云-blue.svg" title="本站加速站点www.zhsher.cn，使用腾讯云为静态资源提供CDN加速"></a></p></div></div><head><link rel="stylesheet" href="https://jsd.onmicrosoft.cn/gh/HCLonely/images@master/others/heartbeat.min.css"></head></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://jsd.onmicrosoft.cn/npm/hexo-theme-butterfly/source/js/tw_cn.min.js"></script><script src="https://jsd.onmicrosoft.cn/npm/@fancyapps/ui@latest/dist/fancybox/fancybox.umd.min.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/instant.page/5.1.0/instantpage.min.js" type="module"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/vanilla-lazyload/17.3.1/lazyload.iife.min.js"></script><script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/node-snackbar/0.1.16/snackbar.min.js"></script><script>function panguFn(){"object"==typeof pangu?pangu.autoSpacingPage():getScript("https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/pangu/4.0.7/pangu.min.js").then((()=>{pangu.autoSpacingPage()}))}function panguInit(){panguFn()}document.addEventListener("DOMContentLoaded",panguInit)</script><div class="js-pjax"><script>(()=>{const e=document.querySelectorAll("#article-container .mermaid-wrap");if(0===e.length)return;const t=()=>{window.loadMermaid=!0;const t="dark"===document.documentElement.getAttribute("data-theme")?"dark":"default";Array.from(e).forEach(((e,n)=>{const d=e.firstElementChild,r="mermaid-"+n,a="%%{init:{ 'theme':'"+t+"'}}%%\n"+d.textContent,i=mermaid.render(r,a);var m;"string"==typeof i?(m=i,d.insertAdjacentHTML("afterend",m)):i.then((({svg:e})=>{d.insertAdjacentHTML("afterend",e)}))}))},n=()=>{window.loadMermaid?t():getScript("https://lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/mermaid/8.14.0/mermaid.min.js").then(t)};btf.addModeChange("mermaid",t),window.pjax?n():document.addEventListener("DOMContentLoaded",n)})()</script><script>(()=>{const t=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"https://twikoo.zhsher.cn/",region:"",onCommentLoaded:function(){btf.loadLightbox(document.querySelectorAll("#twikoo .tk-content img:not(.tk-owo-emotion)"))}},null)),GLOBAL_CONFIG_SITE.isPost&&(()=>{const t=document.getElementById("twikoo-count");t&&twikoo.getCommentsCount({envId:"https://twikoo.zhsher.cn/",region:"",urls:[window.location.pathname],includeReply:!1}).then((function(o){t.textContent=o[0].count})).catch((function(t){console.error(t)}))})()},o=()=>{"object"!=typeof twikoo?getScript("https://jsd.onmicrosoft.cn/npm/twikoo/dist/twikoo.all.min.js").then(t):setTimeout(t,0)};btf.loadComment(document.getElementById("twikoo-wrap"),o)})()</script></div><script>window.addEventListener("load",(()=>{const e=e=>{let t="";if(e.length)for(let n=0;n<e.length;n++)t+="<div class='aside-list-item'>",t+=`<div class='content'>\n        <a class='comment' href='${e[n].url}' title='${e[n].content}'>${e[n].content}</a>\n        <div class='name'><span>${e[n].nick} / </span><time datetime="${e[n].date}">${btf.diffDate(e[n].date,!0)}</time></div>\n        </div></div>`;else t+="没有评论";let n=document.querySelector("#card-newest-comments .aside-list");n.innerHTML=t,window.lazyLoadInstance&&window.lazyLoadInstance.update(),window.pjax&&window.pjax.refresh(n)},t=()=>{if(document.querySelector("#card-newest-comments .aside-list")){const t=saveToLocal.get("twikoo-newest-comments");t?e(JSON.parse(t)):(()=>{const t=()=>{twikoo.getRecentComments({envId:"https://twikoo.zhsher.cn/",region:"",pageSize:6,includeReply:!0}).then((function(t){const n=t.map((e=>{return{content:(t=e.comment,""===t||(t=(t=(t=(t=t.replace(/<img.*?src="(.*?)"?[^\>]+>/gi,"[图片]")).replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi,"[链接]")).replace(/<pre><code>.*?<\/pre>/gi,"[代码]")).replace(/<[^>]+>/g,"")).length>150&&(t=t.substring(0,150)+"..."),t),avatar:e.avatar,nick:e.nick,url:e.url+"#"+e.id,date:new Date(e.created).toISOString()};var t}));saveToLocal.set("twikoo-newest-comments",JSON.stringify(n),10/1440),e(n)})).catch((function(e){document.querySelector("#card-newest-comments .aside-list").textContent="无法获取评论，请确认相关配置是否正确"}))};"object"==typeof twikoo?t():getScript("https://jsd.onmicrosoft.cn/npm/twikoo/dist/twikoo.all.min.js").then(t)})()}};t(),document.addEventListener("pjax:complete",t)}))</script><canvas id="universe"></canvas><script defer src="https://jsd.onmicrosoft.cn/npm/jquery@latest/dist/jquery.min.js"></script><script>var meting_api="https://api.injahow.cn/meting/?server=:server&type=:type&id=:id&auth=:auth&r=:r"</script><script defer src="https://jsd.onmicrosoft.cn/npm/zhsher-static@1.0.13/blog/js/zhsher.min.js"></script><script async data-pjax src="https://jsd.onmicrosoft.cn/npm/zhsher-static@1.0.12/blog/js/zhsherfunction.min.js"></script><script id="canvas_nest" defer color="0,0,255" opacity="0.7" zindex="-1" count="99" mobile="false" src="https://unpkg.com/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://npm.elemecdn.com/butterfly-extsrc@latest/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!1,POWERMODE.mobile=!1,document.body.addEventListener("input",POWERMODE)</script><script id="click-show-text" src="https://npm.elemecdn.com/butterfly-extsrc@latest/dist/click-show-text.min.js" data-mobile="false" data-text="鬼,才,小,张,同,学" data-fontsize="15px" data-random="false" async></script><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.js"></script><script src="https://jsd.onmicrosoft.cn/npm/js-heo@1.0.12/metingjs/Meting.min.js"></script><script src="https://npm.elemecdn.com/pjax@latest/pjax.min.js"></script><script>let pjaxSelectors=["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"]):not([href="/posts/36731/"]):not([href="/talk/"]):not([href="/fcircle/"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(window.tocScrollFn&&window.removeEventListener("scroll",window.tocScrollFn),window.scrollCollect&&window.removeEventListener("scroll",scrollCollect),document.getElementById("rightside").style.cssText="opacity: ''; transform: ''",window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode"),"object"==typeof disqusjs&&disqusjs.destroy()})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach((e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach((e=>t.setAttribute(e.name,e.value))),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)})),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll()})),document.addEventListener("pjax:error",(e=>{404===e.request.status&&pjax.loadUrl("/404.html")}))</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/algoliasearch/4.12.1/algoliasearch-lite.umd.min.js"></script><script src="https://jsd.onmicrosoft.cn/npm/instantsearch.js@latest/dist/instantsearch.production.min.js"></script><script src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/js/search/algolia.js"></script></div></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/algoliasearch/4.12.1/algoliasearch-lite.umd.min.js"></script><script src="https://jsd.onmicrosoft.cn/npm/instantsearch.js@latest/dist/instantsearch.production.min.js"></script><script src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/js/search/algolia.js"></script></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><a class="rightMenu-item" href="javascript:window.history.back();" rel="external nofollow noreferrer"><i class="fa fa-arrow-left"></i></a><a class="rightMenu-item" href="javascript:window.history.forward();" rel="external nofollow noreferrer"><i class="fa fa-arrow-right"></i></a><a class="rightMenu-item" href="javascript:window.location.reload();" rel="external nofollow noreferrer"><i class="fa fa-refresh"></i></a><a class="rightMenu-item" href="javascript:rmf.scrollToTop();" rel="external nofollow noreferrer"><i class="fa fa-arrow-up"></i></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:rmf.copySelect();" rel="external nofollow noreferrer"><i class="fa fa-copy"></i><span>复制</span></a><a class="rightMenu-item" href="javascript:window.open(&quot;https://www.baidu.com/s?wd=&quot;+window.getSelection().toString());window.location.reload();" rel="external nofollow noreferrer"><i class="fa-solid fa-magnifying-glass"></i><span>百度搜索</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-too"><a class="rightMenu-item" href="javascript:window.open(window.getSelection().toString());window.location.reload();" rel="external nofollow noreferrer"><i class="fa fa-link"></i><span>转到链接</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-paste"><a class="rightMenu-item" href="javascript:rmf.paste()" rel="external nofollow noreferrer"><i class="fa fa-copy"></i><span>粘贴</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-post"><a class="rightMenu-item" href="#post-comment"><i class="fas fa-comment"></i><span>空降评论</span></a><a class="rightMenu-item" href="javascript:rmf.copyWordsLink()" rel="external nofollow noreferrer"><i class="fa fa-link"></i><span>复制本文地址</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-to"><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()" rel="external nofollow noreferrer"><i class="fa fa-window-restore"></i><span>新窗口打开</span></a><a class="rightMenu-item" id="menu-too" href="javascript:rmf.open()" rel="external nofollow noreferrer"><i class="fa fa-link"></i><span>转到链接</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()" rel="external nofollow noreferrer"><i class="fa fa-copy"></i><span>复制链接</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-img"><a class="rightMenu-item" href="./#post-comment"><i class="fa fa-download"></i><span>保存图片</span></a><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()" rel="external nofollow noreferrer"><i class="fa fa-window-restore"></i><span>在新窗口打开</span></a><a class="rightMenu-item" href="javascript:rmf.click()" rel="external nofollow noreferrer"><i class="fa fa-arrows-alt"></i><span>全屏显示</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()" rel="external nofollow noreferrer"><i class="fa fa-copy"></i><span>复制图片链接</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" href="javascript:rmf.switchDarkMode();" rel="external nofollow noreferrer"><i class="fa fa-moon"></i><span>昼夜切换</span></a><a class="rightMenu-item" href="javascript:rmf.translate();" rel="external nofollow noreferrer"><i class="fas fa-language"></i><span>繁简转换</span></a><a class="rightMenu-item" href="javascript:rmf.switchReadMode();" rel="external nofollow noreferrer"><i class="fa fa-book"></i><span>阅读模式</span></a><a class="rightMenu-item" href="javascript:window.location.href=&quot;/about/&quot;;" rel="external nofollow noreferrer"><i class="fa fa-info-circle"></i><span>关于小张</span></a></div></div><div class="contact-info"><div class="option"><i class="fas fa-rocket"></i><div class="bloktop"></div><div class="text"><div class="strip"></div><div class="aside_notice">鉴于评论非即时聊天、问题描述不清晰，可以加我并附上你的问题截图。🐧：1310446718，VX：GC_XiaoZhang（无偿，不要怕社恐小张也紧张！也不需要客气就当好朋友聊天就可以啦！）<br>糖果屋交流群：589330978<br>小N姐姐公益群：641126318</div></div></div><div class="option"><i class="fas fa-cube"></i><div class="blok"></div><div class="text"><div class="strip"></div><div class="post-reward"><div class="reward-button"><i class="fa-solid fa-bolt"></i></div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/Hexo_img/config/wechat.png" target="_blank"><img class="post-qr-code-img entered loaded" src="/Hexo_img/config/wechat.png" alt="微信"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/Hexo_img/config/alipay.jpg" target="_blank"><img class="post-qr-code-img entered loaded" src="/Hexo_img/config/alipay.jpg" alt="支付宝"></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div></div></div><div class="option"><i class="fas fa-music"></i><div class="blokbottom"></div><div class="text aplayertext"><div class="strip"></div><div class="aplayer no-destroy" mutex="true" listfolded="true" data-id="7041302176" data-preload="none" data-server="netease" data-volume="0.25" data-order="random" data-type="playlist" data-fixed="true" data-autoplay="false"></div></div></div></div><script data-pjax>if(document.getElementById("recent-posts")&&"/"===location.pathname){var parent=document.getElementById("recent-posts"),child='<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><div class="magnet_item"><a class="magnet_link" href="https://zhsher.cn/categories/小张列传/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">📚 小张列传 (8)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://zhsher.cn/categories/Hexo/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">👩‍💻 博客长征史 (7)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><a class="magnet_link_more"  href="https://zhsher.cn/categories" style="flex:1;text-align: center;margin-bottom: 10px;">查看更多...</a></div></div>';console.log("已挂载magnet"),parent.insertAdjacentHTML("afterbegin",child)}</script><style>#catalog_magnet{flex-wrap:wrap;display:flex;width:100%;justify-content:space-between;padding:10px 10px 0 10px;align-content:flex-start}.magnet_item{flex-basis:calc(50% - 5px);background:#f2f2f2;margin-bottom:10px;border-radius:8px;transition:all .2s ease-in-out}.magnet_item:hover{background:#b30070}.magnet_link_more{color:#555}.magnet_link{color:#000}.magnet_link:hover{color:#fff}@media screen and (max-width:600px){.magnet_item{flex-basis:100%}}.magnet_link_context{display:flex;padding:10px;font-size:16px;transition:all .2s ease-in-out}.magnet_link_context:hover{padding:10px 20px}</style><style></style><script data-pjax>function butterfly_swiper_injector_config(){var l=document.getElementById("recent-posts");console.log("已挂载butterfly_swiper"),l.insertAdjacentHTML("afterbegin",'<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/41646/&quot;);" href="javascript:void(0);" rel="external nofollow noreferrer" alt=""><img width="48" height="48" src="Hexo_img/top_img/hexo.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-05-01</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/41646/&quot;);" href="javascript:void(0);" rel="external nofollow noreferrer" alt="">Hexo博客搭建</a><div class="blog-slider__text">手摸手教你搭建Hexo博客</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/41646/&quot;);" href="javascript:void(0);" rel="external nofollow noreferrer" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/12205/&quot;);" href="javascript:void(0);" rel="external nofollow noreferrer" alt=""><img width="48" height="48" src="Hexo_img/top_img/Hexo博客实时文章排行及访客地图.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-12-26</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/12205/&quot;);" href="javascript:void(0);" rel="external nofollow noreferrer" alt="">hexo-hot-article 实时文章排行及访客地图</a><div class="blog-slider__text">好多人啊？你们在看哪篇呢！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/12205/&quot;);" href="javascript:void(0);" rel="external nofollow noreferrer" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/8779/&quot;);" href="javascript:void(0);" rel="external nofollow noreferrer" alt=""><img width="48" height="48" src="Hexo_img/top_img/Github Actions.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-08-20</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/8779/&quot;);" href="javascript:void(0);" rel="external nofollow noreferrer" alt="">Hexo博客利用Github Action自动化部署</a><div class="blog-slider__text">包含服务器部署，刷新CDN</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/8779/&quot;);" href="javascript:void(0);" rel="external nofollow noreferrer" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/36731/&quot;);" href="javascript:void(0);" rel="external nofollow noreferrer" alt=""><img width="48" height="48" src="Hexo_img/top_img/不被定义的恋爱.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-08-04</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/36731/&quot;);" href="javascript:void(0);" rel="external nofollow noreferrer" alt="">2029 2 12 不被定义的恋爱</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/36731/&quot;);" href="javascript:void(0);" rel="external nofollow noreferrer" alt="">详情       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>')}for(var elist="undefined".split(","),cpage=location.pathname,epage="/",flag=0,i=0;i<elist.length;i++)cpage.includes(elist[i])&&flag++;("all"===epage&&0==flag||epage===cpage)&&butterfly_swiper_injector_config()</script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><div class="js-pjax"><script async>for(var arr=document.getElementsByClassName("recent-post-item"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__zoomIn"),arr[i].setAttribute("data-wow-duration","1.5s"),arr[i].setAttribute("data-wow-delay","200ms"),arr[i].setAttribute("data-wow-offset","30"),arr[i].setAttribute("data-wow-iteration","1")</script><script async>for(var arr=document.getElementsByClassName("card-widget"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__zoomIn"),arr[i].setAttribute("data-wow-duration",""),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><script data-pjax src="https://jsd.onmicrosoft.cn/gh/Zfour/hexo-github-calendar@1.21/hexo_githubcalendar.min.js"></script><script data-pjax>function GithubCalendarConfig(){var t=document.getElementById("recent-posts");t&&"/"==location.pathname&&(console.log("已挂载github calendar"),t.insertAdjacentHTML("afterbegin",'<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><div id="github_loading" style="width:10%;height:100%;margin:0 auto;display: block"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg></div><div id="github_container"></div></div>')),GithubCalendar("https://hexo-hot-article.zhsher.cn/github_calendar?GC-ZF",["#ebedf0","#f1f8ff","#dbedff","#c8e1ff","#79b8ff","#2188ff","#0366d6","#005cc5","#044289","#032f62","#05264c"],"GC-ZF")}document.getElementById("recent-posts")&&GithubCalendarConfig()</script><style>#github_container{min-height:280px}@media screen and (max-width:650px){#github_container{min-height:0}}</style><style></style></body></html>